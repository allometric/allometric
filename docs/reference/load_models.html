<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Load a locally installed table of allometric models — load_models • allometric</title><!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png"><link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png"><link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png"><link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png"><link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png"><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/cosmo/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><link href="../extra.css" rel="stylesheet"><meta property="og:title" content="Load a locally installed table of allometric models — load_models"><meta property="og:description" content="This function loads all locally installed allometric models if they are
downloaded and installed, if not run the install_models function. The
result is of class model_tbl, which behaves very much like a
tibble::tbl_df or a data.frame."><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body data-spy="scroll" data-target="#toc">
    

    <div class="container template-reference-topic">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">allometric</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">1.4.1</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu"><li>
      <a href="../articles/descriptors.html">Describing a Model with Descriptors</a>
    </li>
    <li>
      <a href="../articles/installing_a_model.html">Contributing a Model</a>
    </li>
    <li>
      <a href="../articles/inventory_example.html">Common Inventory Use Cases</a>
    </li>
    <li>
      <a href="../articles/variable_naming_system.html">Variable Naming System</a>
    </li>
  </ul></li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul><ul class="nav navbar-nav navbar-right"><li>
  <a href="https://github.com/allometric/allometric/" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Load a locally installed table of allometric models</h1>
    <small class="dont-index">Source: <a href="https://github.com/allometric/allometric/blob/HEAD/R/load.R" class="external-link"><code>R/load.R</code></a></small>
    <div class="hidden name"><code>load_models.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>This function loads all locally installed allometric models if they are
downloaded and installed, if not run the <code>install_models</code> function. The
result is of class <code>model_tbl</code>, which behaves very much like a
<code><a href="https://tibble.tidyverse.org/reference/tbl_df-class.html" class="external-link">tibble::tbl_df</a></code> or a <code>data.frame</code>.</p>
    </div>

    <div id="ref-usage">
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">load_models</span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div id="value">
    <h2>Value</h2>
    

<p>A model_tbl containing the locally installed models.</p>
    </div>
    <div id="details">
    <h2>Details</h2>
    <p>Printing the <code>head</code> of <code>allometric_models</code>, we can see the structure of the
data</p>
<p></p><div class="sourceCode r"><pre><code><span><span class="va">allometric_models</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/load_models.html">load_models</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">allometric_models</span><span class="op">)</span></span>
<span><span class="co">#&gt; # A tibble: 6 x 10</span></span>
<span><span class="co">#&gt;   id       model_type  country   region    taxa   pub_id        model      family_name covt_name pub_year</span></span>
<span><span class="co">#&gt;   &lt;chr&gt;    &lt;chr&gt;       &lt;list&gt;    &lt;list&gt;    &lt;list&gt; &lt;chr&gt;         &lt;list&gt;     &lt;list&gt;      &lt;list&gt;       &lt;dbl&gt;</span></span>
<span><span class="co">#&gt; 1 cc2078aa site index  &lt;chr [1]&gt; &lt;chr [2]&gt; &lt;Taxa&gt; barrett_1978  &lt;FxdEffcM&gt; &lt;chr [1]&gt;   &lt;chr [2]&gt;     1978</span></span>
<span><span class="co">#&gt; 2 f50865ee stem volume &lt;chr [1]&gt; &lt;chr [1]&gt; &lt;Taxa&gt; bell_1981     &lt;FxdEffcM&gt; &lt;chr [3]&gt;   &lt;chr [2]&gt;     1981</span></span>
<span><span class="co">#&gt; 3 4d35d681 taper       &lt;chr [2]&gt; &lt;chr [3]&gt; &lt;Taxa&gt; bluhm_2007    &lt;FxdEffcM&gt; &lt;chr [3]&gt;   &lt;chr [4]&gt;     2007</span></span>
<span><span class="co">#&gt; 4 8d35a7b6 stem volume &lt;chr [1]&gt; &lt;chr [1]&gt; &lt;Taxa&gt; brackett_1977 &lt;FxdEffcM&gt; &lt;chr [1]&gt;   &lt;chr [2]&gt;     1977</span></span>
<span><span class="co">#&gt; 5 8682a321 stem volume &lt;chr [1]&gt; &lt;chr [1]&gt; &lt;Taxa&gt; brackett_1977 &lt;FxdEffcM&gt; &lt;chr [1]&gt;   &lt;chr [2]&gt;     1977</span></span>
<span><span class="co">#&gt; 6 7cfc15b2 stem volume &lt;chr [1]&gt; &lt;chr [1]&gt; &lt;Taxa&gt; brackett_1977 &lt;FxdEffcM&gt; &lt;chr [1]&gt;   &lt;chr [2]&gt;     1977</span></span></code></pre><p></p></div>
<p>The columns are:</p><ul><li><p><code>id</code> - A unique ID for the model.</p></li>
<li><p><code>model_type</code> - The type of model (e.g., stem volume, site index, etc.)</p></li>
<li><p><code>country</code> - The country or countries from which the model data is from.</p></li>
<li><p><code>region</code> - The region or regions (e.g., state, province, etc.) from which
the model data is from.</p></li>
<li><p><code>taxa</code> - The taxonomic specification of the trees that are modeled.</p></li>
<li><p><code>model</code> - The model object itself.</p></li>
<li><p><code>pub_id</code> - A unique ID representing the publication.</p></li>
<li><p><code>family_name</code> - The names of the contributing authors.</p></li>
<li><p><code>covt_name</code> - The names of the covariates used in the model.</p></li>
<li><p><code>pub_year</code> - The publication year.</p></li>
</ul><p>Models can be searched by their attributes. Note that some of the columns
are <code>list</code> columns, which contain lists as their elements. Filtering on
data in these columns requires the use of <code><a href="https://purrr.tidyverse.org/reference/map.html" class="external-link">purrr::map_lgl</a></code> which is used to
determine truthiness of expressions for each element in a <code>list</code> column.
While this may seem complicated, we believe the nested data structures are
more descriptive and concise for storing the models, and users will quickly
find that searching models in this way can be very powerful.</p>
    </div>
    <div id="finding-contributing-authors">
    <h2>Finding Contributing Authors</h2>
    <p>Using <code>purr::map_lgl</code> to filter the <code>family_name</code> column, we are able to
find publications that contain specific authors of interst. For example, we
may want models only authored by <code>"Hann"</code>. This is elementary to do in
<code>allometric</code>:</p>
<p></p><div class="sourceCode r"><pre><code><span><span class="va">hann_models</span> <span class="op">&lt;-</span> <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span></span>
<span> <span class="va">allometric_models</span>,</span>
<span> <span class="fu">purrr</span><span class="fu">::</span><span class="fu"><a href="https://purrr.tidyverse.org/reference/map.html" class="external-link">map_lgl</a></span><span class="op">(</span><span class="va">family_name</span>, <span class="op">~</span> <span class="st">'Hann'</span> <span class="op"><a href="https://rdrr.io/r/base/match.html" class="external-link">%in%</a></span> <span class="va">.</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">hann_models</span><span class="op">)</span></span>
<span><span class="co">#&gt; # A tibble: 6 x 10</span></span>
<span><span class="co">#&gt;   id       model_type  country   region    taxa   pub_id    model      family_name covt_name pub_year</span></span>
<span><span class="co">#&gt;   &lt;chr&gt;    &lt;chr&gt;       &lt;list&gt;    &lt;list&gt;    &lt;list&gt; &lt;chr&gt;     &lt;list&gt;     &lt;list&gt;      &lt;list&gt;       &lt;dbl&gt;</span></span>
<span><span class="co">#&gt; 1 8970949f stem volume &lt;chr [1]&gt; &lt;chr [2]&gt; &lt;Taxa&gt; hann_1978 &lt;FxdEffcM&gt; &lt;chr [2]&gt;   &lt;chr [2]&gt;     1978</span></span>
<span><span class="co">#&gt; 2 0d53539a stem volume &lt;chr [1]&gt; &lt;chr [2]&gt; &lt;Taxa&gt; hann_1978 &lt;FxdEffcM&gt; &lt;chr [2]&gt;   &lt;chr [2]&gt;     1978</span></span>
<span><span class="co">#&gt; 3 0d109f2c stem volume &lt;chr [1]&gt; &lt;chr [2]&gt; &lt;Taxa&gt; hann_1978 &lt;FxdEffcM&gt; &lt;chr [2]&gt;   &lt;chr [2]&gt;     1978</span></span>
<span><span class="co">#&gt; 4 86dcc7ff stem volume &lt;chr [1]&gt; &lt;chr [2]&gt; &lt;Taxa&gt; hann_1978 &lt;FxdEffcM&gt; &lt;chr [2]&gt;   &lt;chr [2]&gt;     1978</span></span>
<span><span class="co">#&gt; 5 037a7989 stem volume &lt;chr [1]&gt; &lt;chr [2]&gt; &lt;Taxa&gt; hann_1978 &lt;FxdEffcM&gt; &lt;chr [2]&gt;   &lt;chr [2]&gt;     1978</span></span>
<span><span class="co">#&gt; 6 02614f74 stem volume &lt;chr [1]&gt; &lt;chr [2]&gt; &lt;Taxa&gt; hann_1978 &lt;FxdEffcM&gt; &lt;chr [2]&gt;   &lt;chr [2]&gt;     1978</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">nrow</a></span><span class="op">(</span><span class="va">hann_models</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] 87</span></span></code></pre><p></p></div>
<p>Picking apart the above code block, we see that we are using the standard
<code><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">dplyr::filter</a></code> function on the <code>allometric_models</code> dataframe. The second
argument is a call using <code>purrr:map_lgl</code>, which will map over each list
(contained as elements in the <code>family_names</code> column). The second argument to
this function, <code>~ 'Hann' %in% .</code> is itself a function that checks if <code>'Hann'</code>
is in the current list. Imagine we are marching down each row of
<code>allometric_models</code>, <code>.</code> represents the element of <code>family_names</code> we are
considering, which is itself a list of author names.</p>
    </div>
    <div id="finding-first-authors">
    <h2>Finding First Authors</h2>
    <p>Maybe we are only interested in models where <code>'Hann'</code> is the first author.
Using a simple modification we can easily do this.</p>
<p></p><div class="sourceCode r"><pre><code><span><span class="va">hann_first_author_models</span> <span class="op">&lt;-</span> <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span></span>
<span>  <span class="va">allometric_models</span>,</span>
<span>  <span class="fu">purrr</span><span class="fu">::</span><span class="fu"><a href="https://purrr.tidyverse.org/reference/map.html" class="external-link">map_lgl</a></span><span class="op">(</span><span class="va">family_name</span>, <span class="op">~</span> <span class="st">'Hann'</span> <span class="op">==</span> <span class="va">.</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">hann_first_author_models</span><span class="op">)</span></span>
<span><span class="co">#&gt; # A tibble: 6 x 10</span></span>
<span><span class="co">#&gt;   id       model_type  country   region    taxa   pub_id    model      family_name covt_name pub_year</span></span>
<span><span class="co">#&gt;   &lt;chr&gt;    &lt;chr&gt;       &lt;list&gt;    &lt;list&gt;    &lt;list&gt; &lt;chr&gt;     &lt;list&gt;     &lt;list&gt;      &lt;list&gt;       &lt;dbl&gt;</span></span>
<span><span class="co">#&gt; 1 8970949f stem volume &lt;chr [1]&gt; &lt;chr [2]&gt; &lt;Taxa&gt; hann_1978 &lt;FxdEffcM&gt; &lt;chr [2]&gt;   &lt;chr [2]&gt;     1978</span></span>
<span><span class="co">#&gt; 2 0d53539a stem volume &lt;chr [1]&gt; &lt;chr [2]&gt; &lt;Taxa&gt; hann_1978 &lt;FxdEffcM&gt; &lt;chr [2]&gt;   &lt;chr [2]&gt;     1978</span></span>
<span><span class="co">#&gt; 3 0d109f2c stem volume &lt;chr [1]&gt; &lt;chr [2]&gt; &lt;Taxa&gt; hann_1978 &lt;FxdEffcM&gt; &lt;chr [2]&gt;   &lt;chr [2]&gt;     1978</span></span>
<span><span class="co">#&gt; 4 86dcc7ff stem volume &lt;chr [1]&gt; &lt;chr [2]&gt; &lt;Taxa&gt; hann_1978 &lt;FxdEffcM&gt; &lt;chr [2]&gt;   &lt;chr [2]&gt;     1978</span></span>
<span><span class="co">#&gt; 5 037a7989 stem volume &lt;chr [1]&gt; &lt;chr [2]&gt; &lt;Taxa&gt; hann_1978 &lt;FxdEffcM&gt; &lt;chr [2]&gt;   &lt;chr [2]&gt;     1978</span></span>
<span><span class="co">#&gt; 6 02614f74 stem volume &lt;chr [1]&gt; &lt;chr [2]&gt; &lt;Taxa&gt; hann_1978 &lt;FxdEffcM&gt; &lt;chr [2]&gt;   &lt;chr [2]&gt;     1978</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">nrow</a></span><span class="op">(</span><span class="va">hann_first_author_models</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] 50</span></span></code></pre><p></p></div>
<p>We can see that <code>'Hann'</code> is the first author for
50 models in this package.</p>
    </div>
    <div id="finding-models-for-a-given-species">
    <h2>Finding Models for a Given Species</h2>
    <p>One of the most common things people need is a model for a particular
species. For this, we must interact with the <code>taxa</code> column. For example,
to find models for the Pinus genus we can use</p>
<p></p><div class="sourceCode r"><pre><code><span><span class="va">pinus_models</span> <span class="op">&lt;-</span> <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span></span>
<span> <span class="va">allometric_models</span>,</span>
<span> <span class="fu">purrr</span><span class="fu">::</span><span class="fu"><a href="https://purrr.tidyverse.org/reference/map.html" class="external-link">map_lgl</a></span><span class="op">(</span><span class="va">taxa</span>, <span class="op">~</span> <span class="st">"Pinus"</span> <span class="op"><a href="https://rdrr.io/r/base/match.html" class="external-link">%in%</a></span> <span class="va">.</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">pinus_models</span><span class="op">)</span></span>
<span><span class="co">#&gt; # A tibble: 6 x 10</span></span>
<span><span class="co">#&gt;   id       model_type  country   region    taxa   pub_id         model      family_name covt_name pub_year</span></span>
<span><span class="co">#&gt;   &lt;chr&gt;    &lt;chr&gt;       &lt;list&gt;    &lt;list&gt;    &lt;list&gt; &lt;chr&gt;          &lt;list&gt;     &lt;list&gt;      &lt;list&gt;       &lt;dbl&gt;</span></span>
<span><span class="co">#&gt; 1 cc2078aa site index  &lt;chr [1]&gt; &lt;chr [2]&gt; &lt;Taxa&gt; barrett_1978   &lt;FxdEffcM&gt; &lt;chr [1]&gt;   &lt;chr [2]&gt;     1978</span></span>
<span><span class="co">#&gt; 2 3ab229f7 stem volume &lt;chr [1]&gt; &lt;chr [1]&gt; &lt;Taxa&gt; brackett_1977  &lt;FxdEffcM&gt; &lt;chr [1]&gt;   &lt;chr [2]&gt;     1977</span></span>
<span><span class="co">#&gt; 3 4a13ca7e stem volume &lt;chr [1]&gt; &lt;chr [1]&gt; &lt;Taxa&gt; brackett_1977  &lt;FxdEffcM&gt; &lt;chr [1]&gt;   &lt;chr [2]&gt;     1977</span></span>
<span><span class="co">#&gt; 4 21d11091 stem volume &lt;chr [1]&gt; &lt;chr [1]&gt; &lt;Taxa&gt; brackett_1977  &lt;FxdEffcM&gt; &lt;chr [1]&gt;   &lt;chr [2]&gt;     1977</span></span>
<span><span class="co">#&gt; 5 b1d070b5 stem volume &lt;chr [1]&gt; &lt;chr [1]&gt; &lt;Taxa&gt; chojnacky_1985 &lt;FxdEffcM&gt; &lt;chr [1]&gt;   &lt;chr [3]&gt;     1985</span></span>
<span><span class="co">#&gt; 6 a5611fec stem volume &lt;chr [1]&gt; &lt;chr [1]&gt; &lt;Taxa&gt; chojnacky_1985 &lt;FxdEffcM&gt; &lt;chr [1]&gt;   &lt;chr [3]&gt;     1985</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">nrow</a></span><span class="op">(</span><span class="va">pinus_models</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] 285</span></span></code></pre><p></p></div>
<p>Users can also search with a specific taxon, which allows a full
specification from family to species. For example, if we want models that
apply to Ponderosa pine, first declare the necessary taxon, then use it to
filter as before</p>
<p></p><div class="sourceCode r"><pre><code><span><span class="va">ponderosa_taxon</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/Taxon.html">Taxon</a></span><span class="op">(</span></span>
<span> family <span class="op">=</span> <span class="st">"Pinaceae"</span>, genus <span class="op">=</span> <span class="st">"Pinus"</span>, species <span class="op">=</span> <span class="st">"ponderosa"</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">ponderosa_models</span> <span class="op">&lt;-</span> <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span></span>
<span> <span class="va">allometric_models</span>,</span>
<span> <span class="fu">purrr</span><span class="fu">::</span><span class="fu"><a href="https://purrr.tidyverse.org/reference/map.html" class="external-link">map_lgl</a></span><span class="op">(</span><span class="va">taxa</span>, <span class="op">~</span> <span class="va">ponderosa_taxon</span> <span class="op"><a href="https://rdrr.io/r/base/match.html" class="external-link">%in%</a></span> <span class="va">.</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">nrow</a></span><span class="op">(</span><span class="va">ponderosa_models</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] 57</span></span></code></pre><p></p></div>
    </div>
    <div id="finding-a-model-with-specific-data-requirements">
    <h2>Finding a Model with Specific Data Requirements</h2>
    <p>We can even check for models that contain certain types of data requirements.
For example, the following block finds diameter-height models, specifically
models that use diameter outside bark at breast height as the <em>only</em>
covariate. The utility here is obvious, since many inventories are vastly
limited by their available tree measurements.</p>
<p></p><div class="sourceCode r"><pre><code><span><span class="va">dia_ht_models</span> <span class="op">&lt;-</span> <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span></span>
<span>    <span class="va">allometric_models</span>,</span>
<span>    <span class="va">model_type</span> <span class="op">==</span> <span class="st">'stem height'</span>,</span>
<span>    <span class="fu">purrr</span><span class="fu">::</span><span class="fu"><a href="https://purrr.tidyverse.org/reference/map.html" class="external-link">map_lgl</a></span><span class="op">(</span><span class="va">covt_name</span>, <span class="op">~</span> <span class="fu"><a href="https://rdrr.io/r/base/length.html" class="external-link">length</a></span><span class="op">(</span><span class="va">.</span><span class="op">)</span><span class="op">==</span><span class="fl">1</span> <span class="op">&amp;</span> <span class="va">.</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span> <span class="op">==</span> <span class="st">'dsob'</span><span class="op">)</span>,</span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">nrow</a></span><span class="op">(</span><span class="va">dia_ht_models</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] 241</span></span></code></pre><p></p></div>
<p>Breaking this down, we have the first condition <code>model_type=='stem_height'</code>
selecting only models concerned with stem heights as a response variable. The
second line maps over each element of the <code>covt_name</code> column, which is a
character vector. The <code>.</code> represents a given character vector for that row.
First, we ensure that the vector is only one element in size using
<code>length(.)==1</code>, then we ensure that the first (and only) element of this
vector is equal to <code>'dsob'</code>, (diameter outside bark at breast height). In
this case, 241 are available in the package.</p>
    </div>
    <div id="finding-a-model-for-a-region">
    <h2>Finding a Model for a Region</h2>
    <p>By now the user should be sensing a pattern. We can apply the exact same
logic as the <em>Finding Contributing Authors</em> section to find all models
developed using data from <code>US-OR</code></p>
<p></p><div class="sourceCode r"><pre><code><span><span class="va">us_or_models</span> <span class="op">&lt;-</span> <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span></span>
<span>    <span class="va">allometric_models</span>,</span>
<span>    <span class="fu">purrr</span><span class="fu">::</span><span class="fu"><a href="https://purrr.tidyverse.org/reference/map.html" class="external-link">map_lgl</a></span><span class="op">(</span><span class="va">region</span>, <span class="op">~</span> <span class="st">"US-OR"</span> <span class="op"><a href="https://rdrr.io/r/base/match.html" class="external-link">%in%</a></span> <span class="va">.</span><span class="op">)</span>,</span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">nrow</a></span><span class="op">(</span><span class="va">us_or_models</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] 498</span></span></code></pre><p></p></div>
<p>We can see that 498 allometric models are defined for the
state of Oregon, US.</p>
    </div>

  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by Bryce Frank, Francisco Mauro, Elijah Allensworth.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

      </footer></div>

  


  

  </body></html>

